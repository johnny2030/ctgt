<!DOCTYPE html>
<html lang="zh">
	<head>
		<title>{$recruit_name} -{$site_name}</title>
		
		<tc_include file='Public:head' />
		<script src="__TMPL__Public/js/jquery.validate.min.js"></script> 
	</head>

	<body>
		<!-- logo start -->
		<tc_include file="Public:nav" />

		<div id="menu-container" class="main_menu">
			<div class="services" id="menu-2">
				<div class="container">
					<div class="col-md-3 col-sm-6 templatemo_leftgap">
						<div class="templatemo_insideportfolio templatemo_botgap">
							<div class="templatemo_portfoliotext">
								<h2>Join Us</h2>
								<div class="clear"></div>
								{$recruit_description}
							</div>
						</div>
						<div class="templatemo_mainabout templatemo_botgap">
							<div class="templatemo_link">
								<a class="show-1 templatemo_homeservice" data-toggle="modal" data-target="#book" href="javascript:void(0);"  style="font-size:1.1rem;">Click here to book an interview</a>
							</div>
						</div>
					</div>
					
					<div class="col-md-9 col-sm-6 templatemo_leftgap">
						<div class="templatemo_white">
							<div class="templatemo_frame_2">
								<div class="zhaopin-content">
									<h2><span>{$recruit_name}</span></h2>
									<hr/>
									<div class="clear"></div>
									<div class="row">
										<div class="col-md-12 col-sm-12">
											<notempty name="recruit_wage">
												<div class="meta-item">
													<span class="fh-icon"><i class="fa fa-database" aria-hidden="true"></i></span>
													<h4 class="title">Wages:</h4>
													<div class="details wages">{$recruit_wage}</div>
												</div>
											</notempty>
											<notempty name="recruit_people_number">
												<div class="meta-item">
													<span class="fh-icon"><i class="fa fa-users" aria-hidden="true"></i></span>
													<h4 class="title">Gap:</h4>
													<div class="details">{$recruit_people_number} people</div>
												</div>
											</notempty>
											<notempty name="recruit_education">
												<div class="meta-item">
													<span class="fh-icon"><i class="fa fa-id-card-o" aria-hidden="true"></i></span>
													<h4 class="title">Education:</h4>
													<div class="details">{$recruit_education}</div>
												</div>
											</notempty>
											<notempty name="recruit_experience">
												<div class="meta-item">
													<span class="fh-icon"><i class="fa fa-hourglass-half" aria-hidden="true"></i></span>
													<h4 class="title">Hands-on background:</h4>
													<div class="details">{$recruit_experience}</div>
												</div>
											</notempty>
										</div>
									</div>
									<h2><span>Details</span></h2>
									<hr/>
									<div class="clear"></div>
									{$recruit_content}
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<!-- Modal Appointment-->
		<div class="modal fade" id="book" tabindex="-1" role="dialog">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<form id="appointmentForm" method="post" action="{:leuu('portal/recruit/book')}">
						<input type="hidden" name="recruit_id" value="{$id}" >
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
							<h4 class="modal-title" id="myModalLabel">Please select the interview time</h4>
						</div>
						<div class="modal-body interview">
							<div class="form-group">
								<label for="phone">Phone Number</label>
								<div class="input-group col-md-6">
									<span class="input-group-addon">86</span>
									<input type="text" class="form-control" id="phone_text" placeholder="Phone Number" onblur="javacript:document.getElementById('phone').value=document.getElementById('phone_text').value">
								</div>
								<input type="hidden" id="phone" name="phone" value="">
							</div>
							<div id="interview-date">
								<p>Interview Date</p>
								<volist name="recruit_interviewdate" id="vo">
									<button type="button" style="margin-bottom:10px;" class="btn btn-default" id="interview-date-{$vo.id}" onclick="selectDate({$vo.id})" title="{$vo.id}">{:date('Y-m-d',strtotime($vo['interview_date']))}</button>&nbsp;
								</volist>
								<input type="hidden" name="interviewdate_id" id="interviewdate_id" value="">
							</div>
							<div id="interview-time">
								<p>Interview time</p>
								<volist name="recruit_interviewtime" id="vo">
									<button type="button" style="margin-bottom:10px;" class="btn btn-default" id="interview-time-{$vo.id}" onclick="selectTime({$vo.id})" title="{$vo.id}">{:date('H:i',strtotime($vo['interview_start_time']))} - {:date('H:i',strtotime($vo['interview_end_time']))}</button>&nbsp;
								</volist>
								<input type="hidden" name="interviewtime_id" id="interviewtime_id" value="">
							</div>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
							<button type="submit" class="btn btn-primary">Submit</button>
						</div>
					</form>
				</div>
			</div>
		</div>

		<tc_include file="Public:footer" />
		<script src="__TMPL__Public/js/check.js"></script>
		<script type="text/javascript">
			function selectDate(dateId) {
				$('#interview-date button').each(function() {    
					$(this).removeClass('btn-success');  
				}); 
				$('#interview-time button').each(function() {    
					$(this).removeClass('btn-success');
					$(this).removeClass('btn-danger'); 
					$(this).removeAttr('disabled'); 
				}); 
				$('#interview-date-'+dateId).addClass('btn-success');
				var date_title = $('#interview-date-'+dateId).attr('title');
				var recruit_id = {$id};
				$('#interviewdate_id').val(date_title);
				$.post('{:U("recruit/checkTime")}', {interviewdate_id: date_title,recruit_id: recruit_id}, function(data){
					//alert(data.toString().split(',').length);
					//alert(data['index']);
					for(i=0;i<data['index'];i++) {
						//已选时间点变红，onclick失效
						$('#interview-time-'+data['interviewtime_id'][i]).attr('disabled','true');
						$('#interview-time-'+data['interviewtime_id'][i]).addClass('btn-danger');
					}
				});
			}
			function selectTime(timeId) {
				$('#interview-time button').each(function() {    
					$(this).removeClass('btn-success');  
				}); 
				$('#interview-time-'+timeId).addClass('btn-success');
				$('#interviewtime_id').val($('#interview-time-'+timeId).attr('title'));
			}
		</script>
	</body>
</html>