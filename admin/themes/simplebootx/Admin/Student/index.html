<admintpl file="header" />
<link href="__PUBLIC__/simpleboot/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<style>
	<!--
	#student_table th,td {white-space:nowrap;}
	#student_table th {height:40px;padding:0 5px 4px 5px;}
	#student_table td {height:30px;padding:5px 5px 0 5px;}
	#student_table input[type="text"] {width:70px;height:22px;margin:0;}
	select {width: 90px;height:35px;}
	.form-actions button {margin-bottom:5px;}
	.multiselect-container>li>a>label.checkbox {}
	.form-search .checkbox input[type="checkbox"] {margin-left:-15px;}
	#field_button {border-radius: 3px;box-shadow: inset 0 1px 1px rgba(0,0,0,.05);}
	#field_button button {margin-bottom:1px;}
	.well {margin-bottom:0;padding:9px 20px 9px 20px;}
	.table {margin-bottom:0;}
	.pagination {margin:0;}
	.wrap {padding:8px 20px 0 20px;}
	.btn-xs {height:21px;}
	.dropdown-menu {padding:0;}
	-->
</style>
<script type="text/javascript">
	pageLoading();//加载页面loading显示
</script>
</head>
<body>
	<div class="wrap js-check-wrap">
		<ul class="nav nav-tabs" style="width:180px;float:left;">
			<li class="active"><a href="{:U('student/index')}">{:L('STUDENT_LIST')}</a></li>
			<li><a href="{:U('student/add')}">{:L('STUDENT_ADD')}</a></li>
		</ul>
		<div id="field_button" >
			<button class="btn btn-xs" id="button_3">Chinese Name</button>
			<button class="btn btn-xs" id="button_4">Chinese Level</button>
			<button class="btn btn-xs" id="button_5">Wechat</button>
			<button class="btn btn-xs" id="button_6">Phone</button>
			<button class="btn btn-xs" id="button_7">Program</button>
			<button class="btn btn-xs" id="button_9">Program Short Name</button>
			<button class="btn btn-xs" id="button_12">Term</button>
			<button class="btn btn-xs" id="button_13">Year</button>
			<button class="btn btn-xs" id="button_14">Session</button>
			<button class="btn btn-xs" id="button_15">Institution</button>
			<button class="btn btn-xs" id="button_16">Student Email</button>
			<button class="btn btn-xs" id="button_17">Gender</button>
			<button class="btn btn-xs" id="button_18">Date Of Birth</button>
			<button class="btn btn-xs" id="button_19">City Of Birth</button>
			<button class="btn btn-xs" id="button_20">Country Of Birth</button>
			<button class="btn btn-xs" id="button_21">State Of Birth</button>
			<button class="btn btn-xs" id="button_22">Country Of Citizenship </button>
			<button class="btn btn-xs" id="button_23">Ethnicity</button>
			<button class="btn btn-xs" id="button_24">Passport Number</button>
			<button class="btn btn-xs" id="button_25">Issue Date</button>
			<button class="btn btn-xs" id="button_26">Expiration Date</button>
			<button class="btn btn-xs" id="button_27">Issuing Country </button>
			<button class="btn btn-xs" id="button_28">Issuing City</button>
			<button class="btn btn-xs" id="button_29">Name On Passport</button>
		</div>
		<form class="well form-search" method="post" id="cid-form" action="{:U(admin/student/index)}">
			<input type="hidden" name="cols_str" id="cols_str">
			<input type="hidden" name="cmd" id="cmd">
			<select name="year[]" multiple="multiple" id="select_year">{$year_html}</select>
			<select name="term[]" multiple="multiple" id="select_term">{$term_html}</select>
			<select name="session[]" multiple="multiple" id="select_sess">{$sess_html}</select>
			<select name="program[]" multiple="multiple" id="select_program">{$program_html}</select>
			<select name="gender">{$gender_html}</select>
			<select name="course">{$course_html}</select>
			<select name="activity">{$activity_html}</select>
			<select name="term_status">
				<option value="1" <?php echo $term_status == 1 ? 'selected' : ''?>>{:L('DISPLAY')}</option>
				<option value="0" <?php echo $term_status == 0 ? 'selected' : ''?>>{:L('HIDE')}</option>
			</select>
			<input type="text" name="name"  style="width:150px;height:35px;" value="{$name}" placeholder="{:L('NAME')} / AYP" />
			<a class="btn btn-primary" onclick="search_students();" >{:L('SEARCH')}</a>
			<a class="btn btn-danger" href="{:U('student/index')}">{:L('EMPTY')}</a>
			<a class="btn btn-warning" href="javascript:open_iframe_layer_small('{:U('student/student_upload')}','{:L('STUDENT_IMPORT')}')">{:L('IMPORT')}</a>
			<a class="btn btn-success" onclick="export_students();">{:L('EXPORT')}</a>
			<a class="btn btn-warning" href="javascript:open_iframe_dialog_uploadimg('{:U('student/photos_upload')}','{:L('IMAGE_UPLOAD')}')">{:L('STUDENT_UPLOAD_PHOTOS')}</a>
			<a class="btn btn-success" onclick="export_course();">{:L('EXPORT_COURSE')}</a>
		</form>
		<script type="text/javascript">
			//多选下拉框
			//定义参数，更多参数查询bootstrap-mutiselect组件api
			$('#select_year').multiselect({
				nonSelectedText: "Year",
				buttonWidth:"90px"
			});
			
			$('#select_term').multiselect({
				nonSelectedText: "Term",
				buttonWidth:"90px"
			});
			
			$('#select_sess').multiselect({
				nonSelectedText: "Session",
				buttonWidth:"90px"
			});
			
			$('#select_program').multiselect({
				nonSelectedText: "Program",
				buttonWidth:"90px"
			});
			
		</script>
		<form class="js-ajax-form" method="post">
			<div class="table-actions">
				<button class="btn btn-danger btn-xs js-ajax-submit" type="submit" data-action="{:U('student/delete')}" data-subcheck="true" data-msg="{:L('DELETE_CONFIRM_MESSAGE')}">{:L('BATCH_DELETE')}</button>
			</div>
			<div class="row" id="student_table">
				<div class="col-md-4 col-sm-4" style="padding-right:0;">
					<table class="table table-hover table-bordered table-list">
						<thead class="tablehead">
							<tr>
								<th style="text-align:center;"><label><input type="checkbox" class="js-check-all" data-direction="x" data-checklist="js-check-x"></label></th>
								<th>No</th>
								<th>{:L('ID')}</th>
								<th>{:L('AVATAR')}</th>
								<th>First Name</th><!-- 1 -->
								<th>Last Name</th><!-- 2 -->
							</tr>
						</thead>
						<volist name="list" id="user">
							<tr>
								<php>$avatar = json_decode($user['avatar'],true);</php>
								<td style="text-align:center;"><input type="checkbox" class="js-check" data-yid="js-check-y" data-xid="js-check-x" name="ids[]" value="{$user.id}"></td>
								<td>{$i}</td>
								<td>{$user.id}</td>
								<td>
									<notempty name="avatar.url">
										<a href="javascript:parent.image_preview_dialog('{:sp_get_image_preview_url($avatar['url'])}');">
											<img style="width:20px;height:20px;" src="{:sp_get_image_preview_url($avatar['url'])}" title="{:L('CLICK_TO_ENLARGE')}"/>
										</a>
									<else/>
										<img style="width:20px;height:20px;" src="__PUBLIC__/images/headicon.png" />
									</notempty>
								</td>
								<td id="td_1_{$user.id}">
									<span>{$user.first_name}</span>
									<div class="hide">
										<input type="text" name="first_name" value="{$user.first_name}" id="input_1_{$user.id}">
										<a id="submit_1_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_1_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_2_{$user.id}">
									<span>{$user.last_name}</span>
									<div class="hide">
										<input type="text" name="last_name" value="{$user.last_name}" id="input_2_{$user.id}">
										<a id="submit_2_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_2_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
							</tr>
						</volist>
					</table>
				</div>
				<div class="col-md-4 col-sm-4" style="overflow-x:auto;padding-left:0;padding-right:0;">
					<table class="table table-hover table-bordered table-list" id="student_info">
						<thead class="tablehead">
							<tr>
								<th id="head_th_3">Chinese Name</th><!-- 3 -->
								<th id="head_th_4">Chinese level</th><!-- 4 -->
								<th id="head_th_5">Wechat</th><!-- 5 -->
								<th id="head_th_6">Phone</th><!-- 6 -->
								<th id="head_th_7">Program</th><!-- 7 -->
								<th>Program Location</th><!-- 8 -->
								<th id="head_th_9">Program Short Name</th><!-- 9 -->
								<th>Location City</th><!-- 10 -->
								<th>Location Country</th><!-- 11 -->
								<th id="head_th_12">Term</th><!-- 12 -->
								<th id="head_th_13">Year</th><!-- 13 -->
								<th id="head_th_14">Session</th><!-- 14 -->
								<th id="head_th_15">Institution</th><!-- 15 -->
								<th id="head_th_16">Student Email</th><!-- 16 -->
								<th id="head_th_17">Gender</th><!-- 17 -->
								<th id="head_th_18">Date Of Birth</th><!-- 18 -->
								<th id="head_th_19">City Of Birth</th><!-- 19 -->
								<th id="head_th_20">Country Of Birth</th><!-- 20 -->
								<th id="head_th_21">State Of Birth</th><!-- 21 -->
								<th id="head_th_22">Country Of Citizenship </th><!-- 22 -->
								<th id="head_th_23">Ethnicity </th><!-- 23 -->
								<th id="head_th_24">Passport Number</th><!-- 24 -->
								<th id="head_th_25">Issue Date </th><!-- 25 -->
								<th id="head_th_26">Expiration Date</th><!-- 26 -->
								<th id="head_th_27">Issuing Country </th><!-- 27 -->
								<th id="head_th_28">Issuing City </th><!-- 28 -->
								<th id="head_th_29">Name On Passport</th><!-- 29 -->
								<th>Primary Advisor</th><!-- 30 -->
								<th>Advisor Email</th><!-- 31 -->
								<th>Advisor Daytime Phone</th><!-- 32 -->
								<th>Advisor Evening Phone</th><!-- 33 -->
								<th>Advisor Mobile Phone</th><!-- 34 -->
								<th>Onsite Address Line 1</th><!-- 35 -->
								<th>Onsite Address Line 2</th><!-- 36 -->
								<th>Onsite Address Line 3</th><!-- 37 -->
								<th>Onsite Room Name</th><!-- 38 -->
								<th>Onsite Room Number</th><!-- 39 -->
								<th>Onsite City</th><!-- 40 -->
								<th>Onsite Postal Code</th><!-- 41 -->
								<th>Onsite Country</th><!-- 42 -->
								<th>Primary Emergency Contact First Name</th><!-- 43 -->
								<th>Primary Emergency Contact Last Name</th><!-- 44 -->
								<th>Primary Emergency Contact Relationship</th><!-- 45 -->
								<th>Primary Emergency Contact Email</th><!-- 46 -->
								<th>Primary Emergency Contact Daytime Phone</th><!-- 47 -->
								<th>Primary Emergency Contact Evening Phone</th><!-- 48 -->
								<th>Primary Emergency Contact Mobile Phone</th><!-- 49 -->
								<th>Alternate Emergency Contact First Name</th><!-- 50 -->
								<th>Alternate Emergency Contact Last Name</th><!-- 51 -->
								<th>Alternate Emergency Contact Relationship</th><!-- 52 -->
								<th>Alternate Emergency Contact Email</th><!-- 53 -->
								<th>Alternate Emergency Contact Daytime Phone</th><!-- 54 -->
								<th>Alternate Emergency Contact Evening Phone</th><!-- 55 -->
								<th>Alternate Emergency Contact Mobile Phone</th><!-- 56 -->
								<th>Primary Emergency Contact</th><!-- 57 -->
								<th>Secondary Emergency Contact</th><!-- 58 -->
								<th>Health, Safety and Security Officer</th><!-- 59 -->
								<th>Program Type</th><!-- 60 -->
								<th>Permanent Address Line 1</th><!-- 61 -->
								<th>Permanent Address Line 2</th><!-- 62 -->
								<th>Permanent Address Line 3</th><!-- 63 -->
								<th>Permanent City</th><!-- 64 -->
								<th>Permanent State</th><!-- 65 -->
								<th>Permanent Postal Code</th><!-- 66 -->
								<th>Permanent Country</th><!-- 67 -->
								<th>Permanent Daytime Phone</th><!-- 68 -->
								<th>Permanent Evening Phone</th><!-- 69 -->
								<th>Permanent Mobile Phone</th><!-- 70 -->
								<th>Alternate Address Line 1</th><!-- 71 -->
								<th>Alternate Address Line 2</th><!-- 72 -->
								<th>Alternate Address Line 3</th><!-- 73 -->
								<th>Alternate City</th><!-- 74 -->
								<th>Alternate State</th><!-- 75 -->
								<th>Alternate Postal Code</th><!-- 76 -->
								<th>Alternate Country</th><!-- 77 -->
								<th>Alternate Daytime Phone</th><!-- 78 -->
								<th>Alternate Evening Phone</th><!-- 79 -->
								<th>Alternate Mobile Phone</th><!-- 80 -->
								<th>Alternate Start Date</th><!-- 81 -->
								<th>Alternate End Date</th><!-- 82 -->
								<!-- 冗余字段展示 -->
								<volist name="rd_fields" id="rd_field">
									<th id="head_rd_field_{$rd_field.id}">
										<span>{$rd_field.field_key}</span>
										<div class="hide">
											<input type="text" name="field_key" value="{$rd_field.field_key}" id="head_input_{$rd_field.id}">
											<a id="head_submit_{$rd_field.id}" class="btn btn-success btn-xs">✔</a>
											<a id="head_cancel_{$rd_field.id}" class="btn btn-danger btn-xs">✘</a>
										</div>
									</th>
								</volist>
							</tr>
						</thead>
						<volist name="list" id="user">
							<tr>
								<td id="td_3_{$user.id}">
									<span>{$user.chinese_name}</span>
									<div class="hide">
										<input type="text" name="chinese_name" value="{$user.chinese_name}" id="input_3_{$user.id}">
										<a id="submit_3_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_3_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<php>
									$chinese_levels = D('Course')->alias('c')->field('c.course_name')->join('__COURSE_STUDENT_RELATIONSHIP__ csr ON csr.course_id=c.id')->where(array('csr.student_id' => $user['id'],'csr.course_student_status' => 1,'c.course_type' => 2))->select();
									$chinese_level_arr = array();
									foreach ($chinese_levels as $chinese_level) $chinese_level_arr[] = $chinese_level['course_name'];
									$chinese_level_str = implode(';',$chinese_level_arr);
								</php>
								<td id="td_4_{$user.id}">
									<span>{$chinese_level_str}</span>
									<!-- <div class="hide">
										<input type="text" name="chinese_level" id="input_4_{$user.id}">
										<a id="submit_4_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_4_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div> -->
								</td>
								<td id="td_5_{$user.id}">
									<span>{$user.wechat}</span>
									<div class="hide">
										<input type="text" name="wechat" value="{$user.wechat}" id="input_5_{$user.id}">
										<a id="submit_5_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_5_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_6_{$user.id}">
									<span>{$user.phone}</span>
									<div class="hide">
										<input type="text" name="phone" value="{$user.phone}" id="input_6_{$user.id}">
										<a id="submit_6_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_6_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_7_{$user.id}">
									<span>{$user.program}</span>
									<div class="hide">
										<input type="text" name="program" value="{$user.program}" id="input_7_{$user.id}">
										<a id="submit_7_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_7_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_8_{$user.id}">
									<span>{$user.program_location}</span>
									<div class="hide">
										<input type="text" name="program_location" value="{$user.program_location}" id="input_8_{$user.id}">
										<a id="submit_8_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_8_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_9_{$user.id}">
									<span>{$user.program_short_name}</span>
									<div class="hide">
										<input type="text" name="program_short_name" value="{$user.program_short_name}" id="input_9_{$user.id}">
										<a id="submit_9_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_9_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_10_{$user.id}">
									<span>{$user.location_city}</span>
									<div class="hide">
										<input type="text" name="location_city" value="{$user.location_city}" id="input_10_{$user.id}">
										<a id="submit_10_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_10_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_11_{$user.id}">
									<span>{$user.location_country}</span>
									<div class="hide">
										<input type="text" name="location_country" value="{$user.location_country}" id="input_11_{$user.id}">
										<a id="submit_11_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_11_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_12_{$user.id}">
									<span>{$user.term}</span>
									<div class="hide">
										<input type="text" name="term" value="{$user.term}" id="input_12_{$user.id}">
										<a id="submit_12_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_12_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_13_{$user.id}">
									<span>{$user.year}</span>
									<div class="hide">
										<input type="text" name="year" value="{$user.year}" id="input_13_{$user.id}">
										<a id="submit_13_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_13_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_14_{$user.id}">
									<span>{$user.session}</span>
									<div class="hide">
										<input type="text" name="session" value="{$user.session}" id="input_14_{$user.id}">
										<a id="submit_14_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_14_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_15_{$user.id}">
									<span>{$user.institution}</span>
									<div class="hide">
										<input type="text" name="institution" value="{$user.institution}" id="input_15_{$user.id}">
										<a id="submit_15_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_15_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_16_{$user.id}">
									<span>{$user.student_email}</span>
									<div class="hide">
										<input type="text" name="student_email" value="{$user.student_email}" id="input_16_{$user.id}">
										<a id="submit_16_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_16_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_17_{$user.id}">
									<span>{$user.gender}</span>
									<div class="hide">
										<input type="text" name="gender" value="{$user.gender}" id="input_17_{$user.id}">
										<a id="submit_17_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_17_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_18_{$user.id}">
									<span>{$user.date_of_birth}</span>
									<div class="hide">
										<input type="text" name="date_of_birth" value="{$user.date_of_birth}" id="input_18_{$user.id}">
										<a id="submit_18_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_18_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_19_{$user.id}">
									<span>{$user.city_of_birth}</span>
									<div class="hide">
										<input type="text" name="city_of_birth" value="{$user.city_of_birth}" id="input_19_{$user.id}">
										<a id="submit_19_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_19_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_20_{$user.id}">
									<span>{$user.country_of_birth}</span>
									<div class="hide">
										<input type="text" name="country_of_birth" value="{$user.country_of_birth}" id="input_20_{$user.id}">
										<a id="submit_20_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_20_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_21_{$user.id}">
									<span>{$user.state_of_birth}</span>
									<div class="hide">
										<input type="text" name="state_of_birth" value="{$user.state_of_birth}" id="input_21_{$user.id}">
										<a id="submit_21_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_21_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_22_{$user.id}">
									<span>{$user.country_of_citizenship}</span>
									<div class="hide">
										<input type="text" name="country_of_citizenship" value="{$user.country_of_citizenship}" id="input_22_{$user.id}">
										<a id="submit_22_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_22_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_23_{$user.id}">
									<span>{$user.ethnicity}</span>
									<div class="hide">
										<input type="text" name="ethnicity" value="{$user.ethnicity}" id="input_23_{$user.id}">
										<a id="submit_23_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_23_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_24_{$user.id}">
									<span>{$user.passport_number}</span>
									<div class="hide">
										<input type="text" name="passport_number" value="{$user.passport_number}" id="input_24_{$user.id}">
										<a id="submit_24_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_24_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_25_{$user.id}">
									<span>{$user.issue_date}</span>
									<div class="hide">
										<input type="text" name="issue_date" value="{$user.issue_date}" id="input_25_{$user.id}">
										<a id="submit_25_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_25_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_26_{$user.id}">
									<span>{$user.expiration_date}</span>
									<div class="hide">
										<input type="text" name="expiration_date" value="{$user.expiration_date}" id="input_26_{$user.id}">
										<a id="submit_26_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_26_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_27_{$user.id}">
									<span>{$user.issuing_country}</span>
									<div class="hide">
										<input type="text" name="issuing_country" value="{$user.issuing_country}" id="input_27_{$user.id}">
										<a id="submit_27_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_27_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_28_{$user.id}">
									<span>{$user.issuing_city}</span>
									<div class="hide">
										<input type="text" name="issuing_city" value="{$user.issuing_city}" id="input_28_{$user.id}">
										<a id="submit_28_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_28_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_29_{$user.id}">
									<span>{$user.name_on_passport}</span>
									<div class="hide">
										<input type="text" name="name_on_passport" value="{$user.name_on_passport}" id="input_29_{$user.id}">
										<a id="submit_29_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_29_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_30_{$user.id}">
									<span>{$user.primary_advisor}</span>
									<div class="hide">
										<input type="text" name="primary_advisor" value="{$user.primary_advisor}" id="input_30_{$user.id}">
										<a id="submit_30_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_30_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_31_{$user.id}">
									<span>{$user.advisor_email}</span>
									<div class="hide">
										<input type="text" name="advisor_email" value="{$user.advisor_email}" id="input_31_{$user.id}">
										<a id="submit_31_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_31_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_32_{$user.id}">
									<span>{$user.advisor_daytime_phone}</span>
									<div class="hide">
										<input type="text" name="advisor_daytime_phone" value="{$user.advisor_daytime_phone}" id="input_32_{$user.id}">
										<a id="submit_32_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_32_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_33_{$user.id}">
									<span>{$user.advisor_evening_phone}</span>
									<div class="hide">
										<input type="text" name="advisor_evening_phone" value="{$user.advisor_evening_phone}" id="input_33_{$user.id}">
										<a id="submit_33_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_33_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_34_{$user.id}">
									<span>{$user.advisor_mobile_phone}</span>
									<div class="hide">
										<input type="text" name="advisor_mobile_phone" value="{$user.advisor_mobile_phone}" id="input_34_{$user.id}">
										<a id="submit_34_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_34_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_35_{$user.id}">
									<span>{$user.onsite_address_line_1}</span>
									<div class="hide">
										<input type="text" name="onsite_address_line_1" value="{$user.onsite_address_line_1}" id="input_35_{$user.id}">
										<a id="submit_35_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_35_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_36_{$user.id}">
									<span>{$user.onsite_address_line_2}</span>
									<div class="hide">
										<input type="text" name="onsite_address_line_2" value="{$user.onsite_address_line_2}" id="input_36_{$user.id}">
										<a id="submit_36_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_36_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_37_{$user.id}">
									<span>{$user.onsite_address_line_3}</span>
									<div class="hide">
										<input type="text" name="onsite_address_line_3" value="{$user.onsite_address_line_3}" id="input_37_{$user.id}">
										<a id="submit_37_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_37_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_38_{$user.id}">
									<span>{$user.onsite_room_name}</span>
									<div class="hide">
										<input type="text" name="onsite_room_name" value="{$user.onsite_room_name}" id="input_38_{$user.id}">
										<a id="submit_38_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_38_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_39_{$user.id}">
									<span>{$user.onsite_room_number}</span>
									<div class="hide">
										<input type="text" name="onsite_room_number" value="{$user.onsite_room_number}" id="input_39_{$user.id}">
										<a id="submit_39_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_39_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_40_{$user.id}">
									<span>{$user.onsite_city}</span>
									<div class="hide">
										<input type="text" name="onsite_city" value="{$user.onsite_city}" id="input_40_{$user.id}">
										<a id="submit_40_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_40_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_41_{$user.id}">
									<span>{$user.onsite_postal_code}</span>
									<div class="hide">
										<input type="text" name="onsite_postal_code" value="{$user.onsite_postal_code}" id="input_41_{$user.id}">
										<a id="submit_41_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_41_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_42_{$user.id}">
									<span>{$user.onsite_country}</span>
									<div class="hide">
										<input type="text" name="onsite_country" value="{$user.onsite_country}" id="input_42_{$user.id}">
										<a id="submit_42_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_42_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_43_{$user.id}">
									<span>{$user.primary_emergency_contact_first_name}</span>
									<div class="hide">
										<input type="text" name="primary_emergency_contact_first_name" value="{$user.primary_emergency_contact_first_name}" id="input_43_{$user.id}">
										<a id="submit_43_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_43_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_44_{$user.id}">
									<span>{$user.primary_emergency_contact_last_name}</span>
									<div class="hide">
										<input type="text" name="primary_emergency_contact_last_name" value="{$user.primary_emergency_contact_last_name}" id="input_44_{$user.id}">
										<a id="submit_44_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_44_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_45_{$user.id}">
									<span>{$user.primary_emergency_contact_relationship}</span>
									<div class="hide">
										<input type="text" name="primary_emergency_contact_relationship" value="{$user.primary_emergency_contact_relationship}" id="input_45_{$user.id}">
										<a id="submit_45_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_45_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_46_{$user.id}">
									<span>{$user.primary_emergency_contact_email}</span>
									<div class="hide">
										<input type="text" name="primary_emergency_contact_email" value="{$user.primary_emergency_contact_email}" id="input_46_{$user.id}">
										<a id="submit_46_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_46_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_47_{$user.id}">
									<span>{$user.primary_emergency_contact_daytime_phone}</span>
									<div class="hide">
										<input type="text" name="primary_emergency_contact_daytime_phone" value="{$user.primary_emergency_contact_daytime_phone}" id="input_47_{$user.id}">
										<a id="submit_47_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_47_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_48_{$user.id}">
									<span>{$user.primary_emergency_contact_evening_phone}</span>
									<div class="hide">
										<input type="text" name="primary_emergency_contact_evening_phone" value="{$user.primary_emergency_contact_evening_phone}" id="input_48_{$user.id}">
										<a id="submit_48_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_48_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_49_{$user.id}">
									<span>{$user.primary_emergency_contact_mobile_phone}</span>
									<div class="hide">
										<input type="text" name="primary_emergency_contact_mobile_phone" value="{$user.primary_emergency_contact_mobile_phone}" id="input_49_{$user.id}">
										<a id="submit_49_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_49_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_50_{$user.id}">
									<span>{$user.alternate_emergency_contact_first_name}</span>
									<div class="hide">
										<input type="text" name="alternate_emergency_contact_first_name" value="{$user.alternate_emergency_contact_first_name}" id="input_50_{$user.id}">
										<a id="submit_50_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_50_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_51_{$user.id}">
									<span>{$user.alternate_emergency_contact_last_name}</span>
									<div class="hide">
										<input type="text" name="alternate_emergency_contact_last_name" value="{$user.alternate_emergency_contact_last_name}" id="input_51_{$user.id}">
										<a id="submit_51_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_51_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_52_{$user.id}">
									<span>{$user.alternate_emergency_contact_relationship}</span>
									<div class="hide">
										<input type="text" name="alternate_emergency_contact_relationship" value="{$user.alternate_emergency_contact_relationship}" id="input_52_{$user.id}">
										<a id="submit_52_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_52_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_53_{$user.id}">
									<span>{$user.alternate_emergency_contact_email}</span>
									<div class="hide">
										<input type="text" name="alternate_emergency_contact_email" value="{$user.alternate_emergency_contact_email}" id="input_53_{$user.id}">
										<a id="submit_53_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_53_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_54_{$user.id}">
									<span>{$user.alternate_emergency_contact_daytime_phone}</span>
									<div class="hide">
										<input type="text" name="alternate_emergency_contact_daytime_phone" value="{$user.alternate_emergency_contact_daytime_phone}" id="input_54_{$user.id}">
										<a id="submit_54_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_54_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_55_{$user.id}">
									<span>{$user.alternate_emergency_contact_evening_phone}</span>
									<div class="hide">
										<input type="text" name="alternate_emergency_contact_evening_phone" value="{$user.alternate_emergency_contact_evening_phone}" id="input_55_{$user.id}">
										<a id="submit_55_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_55_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_56_{$user.id}">
									<span>{$user.alternate_emergency_contact_mobile_phone}</span>
									<div class="hide">
										<input type="text" name="alternate_emergency_contact_mobile_phone" value="{$user.alternate_emergency_contact_mobile_phone}" id="input_56_{$user.id}">
										<a id="submit_56_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_56_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_57_{$user.id}">
									<span>{$user.primary_emergency_contact}</span>
									<div class="hide">
										<input type="text" name="primary_emergency_contact" value="{$user.primary_emergency_contact}" id="input_57_{$user.id}">
										<a id="submit_57_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_57_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_58_{$user.id}">
									<span>{$user.secondary_emergency_contact}</span>
									<div class="hide">
										<input type="text" name="secondary_emergency_contact" value="{$user.secondary_emergency_contact}" id="input_58_{$user.id}">
										<a id="submit_58_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_58_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_59_{$user.id}">
									<span>{$user.health_safety_and_security_officer}</span>
									<div class="hide">
										<input type="text" name="health_safety_and_security_officer" value="{$user.health_safety_and_security_officer}" id="input_59_{$user.id}">
										<a id="submit_59_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_59_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_60_{$user.id}">
									<span>{$user.program_type}</span>
									<div class="hide">
										<input type="text" name="program_type" value="{$user.program_type}" id="input_60_{$user.id}">
										<a id="submit_60_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_60_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_61_{$user.id}">
									<span>{$user.permanent_address_line_1}</span>
									<div class="hide">
										<input type="text" name="permanent_address_line_1" value="{$user.permanent_address_line_1}" id="input_61_{$user.id}">
										<a id="submit_61_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_61_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_62_{$user.id}">
									<span>{$user.permanent_address_line_2}</span>
									<div class="hide">
										<input type="text" name="permanent_address_line_2" value="{$user.permanent_address_line_2}" id="input_62_{$user.id}">
										<a id="submit_62_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_62_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_63_{$user.id}">
									<span>{$user.permanent_address_line_3}</span>
									<div class="hide">
										<input type="text" name="permanent_address_line_3" value="{$user.permanent_address_line_3}" id="input_63_{$user.id}">
										<a id="submit_63_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_63_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_64_{$user.id}">
									<span>{$user.permanent_city}</span>
									<div class="hide">
										<input type="text" name="permanent_city" value="{$user.permanent_city}" id="input_64_{$user.id}">
										<a id="submit_64_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_64_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_65_{$user.id}">
									<span>{$user.permanent_state}</span>
									<div class="hide">
										<input type="text" name="permanent_state" value="{$user.permanent_state}" id="input_65_{$user.id}">
										<a id="submit_65_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_65_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_66_{$user.id}">
									<span>{$user.permanent_postal_code}</span>
									<div class="hide">
										<input type="text" name="permanent_postal_code" value="{$user.permanent_postal_code}" id="input_66_{$user.id}">
										<a id="submit_66_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_66_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_67_{$user.id}">
									<span>{$user.permanent_country}</span>
									<div class="hide">
										<input type="text" name="permanent_country" value="{$user.permanent_country}" id="input_67_{$user.id}">
										<a id="submit_67_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_67_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_68_{$user.id}">
									<span>{$user.permanent_daytime_phone}</span>
									<div class="hide">
										<input type="text" name="permanent_daytime_phone" value="{$user.permanent_daytime_phone}" id="input_68_{$user.id}">
										<a id="submit_68_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_68_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_69_{$user.id}">
									<span>{$user.permanent_evening_phone}</span>
									<div class="hide">
										<input type="text" name="permanent_evening_phone" value="{$user.permanent_evening_phone}" id="input_69_{$user.id}">
										<a id="submit_69_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_69_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_70_{$user.id}">
									<span>{$user.permanent_mobile_phone}</span>
									<div class="hide">
										<input type="text" name="permanent_mobile_phone" value="{$user.permanent_mobile_phone}" id="input_70_{$user.id}">
										<a id="submit_70_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_70_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_71_{$user.id}">
									<span>{$user.alternate_address_line_1}</span>
									<div class="hide">
										<input type="text" name="alternate_address_line_1" value="{$user.alternate_address_line_1}" id="input_71_{$user.id}">
										<a id="submit_71_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_71_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_72_{$user.id}">
									<span>{$user.alternate_address_line_2}</span>
									<div class="hide">
										<input type="text" name="alternate_address_line_2" value="{$user.alternate_address_line_2}" id="input_72_{$user.id}">
										<a id="submit_72_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_72_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_73_{$user.id}">
									<span>{$user.alternate_address_line_3}</span>
									<div class="hide">
										<input type="text" name="alternate_address_line_3" value="{$user.alternate_address_line_3}" id="input_73_{$user.id}">
										<a id="submit_73_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_73_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_74_{$user.id}">
									<span>{$user.alternate_city}</span>
									<div class="hide">
										<input type="text" name="alternate_city" value="{$user.alternate_city}" id="input_74_{$user.id}">
										<a id="submit_74_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_74_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_75_{$user.id}">
									<span>{$user.alternate_state}</span>
									<div class="hide">
										<input type="text" name="alternate_state" value="{$user.alternate_state}" id="input_75_{$user.id}">
										<a id="submit_75_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_75_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_76_{$user.id}">
									<span>{$user.alternate_postal_code}</span>
									<div class="hide">
										<input type="text" name="alternate_postal_code" value="{$user.alternate_postal_code}" id="input_76_{$user.id}">
										<a id="submit_76_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_76_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_77_{$user.id}">
									<span>{$user.alternate_country}</span>
									<div class="hide">
										<input type="text" name="alternate_country" value="{$user.alternate_country}" id="input_77_{$user.id}">
										<a id="submit_77_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_77_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_78_{$user.id}">
									<span>{$user.alternate_daytime_phone}</span>
									<div class="hide">
										<input type="text" name="alternate_daytime_phone" value="{$user.alternate_daytime_phone}" id="input_78_{$user.id}">
										<a id="submit_78_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_78_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_79_{$user.id}">
									<span>{$user.alternate_evening_phone}</span>
									<div class="hide">
										<input type="text" name="alternate_evening_phone" value="{$user.alternate_evening_phone}" id="input_79_{$user.id}">
										<a id="submit_79_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_79_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_80_{$user.id}">
									<span>{$user.alternate_mobile_phone}</span>
									<div class="hide">
										<input type="text" name="alternate_mobile_phone" value="{$user.alternate_mobile_phone}" id="input_80_{$user.id}">
										<a id="submit_80_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_80_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_81_{$user.id}">
									<span>{$user.alternate_start_date}</span>
									<div class="hide">
										<input type="text" name="alternate_start_date" value="{$user.alternate_start_date}" id="input_81_{$user.id}">
										<a id="submit_81_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_81_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_82_{$user.id}">
									<span>{$user.alternate_end_date}</span>
									<div class="hide">
										<input type="text" name="alternate_end_date" value="{$user.alternate_end_date}" id="input_82_{$user.id}">
										<a id="submit_82_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_82_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<!-- 冗余字段 -->
								<td id="td_83_{$user.id}">
									<span>{$user.rd_field_1}</span>
									<div class="hide">
										<input type="text" name="rd_field_1" value="{$user.rd_field_1}" id="input_83_{$user.id}">
										<a id="submit_83_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_83_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_84_{$user.id}">
									<span>{$user.rd_field_2}</span>
									<div class="hide">
										<input type="text" name="rd_field_2" value="{$user.rd_field_2}" id="input_84_{$user.id}">
										<a id="submit_84_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_84_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_85_{$user.id}">
									<span>{$user.rd_field_3}</span>
									<div class="hide">
										<input type="text" name="rd_field_3" value="{$user.rd_field_3}" id="input_85_{$user.id}">
										<a id="submit_85_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_85_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_86_{$user.id}">
									<span>{$user.rd_field_4}</span>
									<div class="hide">
										<input type="text" name="rd_field_4" value="{$user.rd_field_4}" id="input_86_{$user.id}">
										<a id="submit_86_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_86_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
								<td id="td_87_{$user.id}">
									<span>{$user.rd_field_5}</span>
									<div class="hide">
										<input type="text" name="rd_field_5" value="{$user.rd_field_5}" id="input_87_{$user.id}">
										<a id="submit_87_{$user.id}" class="btn btn-success btn-xs">✔</a>
										<a id="cancel_87_{$user.id}" class="btn btn-danger btn-xs">✘</a>
									</div>
								</td>
							</tr>
						</volist>
					</table>
				</div>
				<div class="col-md-4 col-sm-4" style="padding-left:0;">
					<table class="table table-hover table-bordered table-list">
						<thead class="tablehead">
							<tr>
								<th>{:L('GRADE_INFORMATION')}</th>
								<th>{:L('COURSE_INFORMATION')}</th>
								<th>{:L('ACTIVITY_INFORMATION')}</th>
								<th style="text-align:center;">{:L('ACTIONS')}
									<!-- <a class="btn btn-xs btn-success" href="javascript:open_iframe_dialog('{:U('student/field_add')}','{:L('添加冗余字段')}')" title="添加冗余字段"> ＋ </a> -->
								</th>
							</tr>
						</thead>
						<volist name="list" id="user">
							<tr>
								<td style="text-align:center;">
									<php>
										$term_year_sess_val = trim($user['year'])."-".trim($user['term'])."-".trim($user['session'])."-".trim($user['program']);
										$score_count = D('Score')->where(array('student_id' => $user['id']))->count();
									</php>
									<if condition="$score_count eq 0">
										<button class="btn btn-warning btn-xs" type="button" id="student_{$user.id}">{:L('ENTER')}</button>
									<else/>
										<a class="btn btn-success btn-xs" href="javascript:open_iframe_dialog('{:U('score/detail',array('student_id' => $user['id'],'entry' => 'search'))}','{:L('GRADE_INFORMATION')}')">{:L('VIEW')}</a>
									</if>
								</td>
								<td style="text-align:center;">
									<php>
										$student_courses_count = D('CourseStudentRelationship')->where(array('student_id' => $user['id'],'course_student_status' => 1))->count();
										$student_courses = D('CourseStudentRelationship')->alias('csr')->join('__COURSE__ c ON c.id=csr.course_id')->where(array('csr.student_id' => $user['id'],'csr.course_student_status' => 1,'c.course_status' => 1))->select();
										$student_activities = D('ActivityStudentRelationship')->where(array('student_id' => $user['id']))->select();
									</php>
									<empty name="student_courses">
										<a href="javascript:open_iframe_dialog('{:U('student/course_allot',array('student_id' => $user['id']))}','{:L('COURSE_SIGNUP')}')" class="btn btn-warning btn-xs"> {:L('SIGNUP')}</a> 
									<else/>
										<a href="javascript:open_iframe_dialog('{:U('student/course_allot_list',array('student_id' => $user['id']))}','{:L('COURSE_INFORMATION')}')" class="btn btn-success btn-xs"> {:L('VIEW')}</a>
									</empty>
								</td>
								<td style="text-align:center;">
									<empty name="student_activities">
										{:L('NO_DATA')}
									<else/>
										<a href="javascript:open_iframe_dialog('{:U('student/activity_list',array('student_id' => $user['id']))}','{:L('ACTIVITY_INFORMATION')}')" class="btn btn-success btn-xs"> {:L('VIEW')}</a>
									</empty>
								</td>
								<td style="text-align:center;">
									<a class="btn btn-success btn-xs" href="javascript:open_iframe_dialog('{:U('user/center/index',array('id'=>$user['id']))}','{:L('STUDENT_DETAILS')}')">{:L('VIEW')}</a>
									<a class="btn btn-warning btn-xs" href="{:U('student/edit',array('id'=>$user['id']))}">{:L('EDIT')}</a>
									<a class="btn btn-danger btn-xs js-ajax-delete" href="{:U('student/delete',array('id'=>$user['id']))}" data-msg="{:L('DELETE_CONFIRM_MESSAGE')}">{:L('STUDENT_DEL')}</a>
									<a class="btn btn-warning btn-xs" href="javascript:open_iframe_dialog_uploadimg('{:U('student/pv_upload',array('id'=>$user['id']))}','{:L('IMAGE_UPLOAD')}')">{:L('UPLOAD')}</a>
									<br />
								</td>
							</tr>
						</volist>
					</table>
				</div>
			</div>
			<div class="pagination">{$page}</div>
		</form>
	</div>
	<script src="__PUBLIC__/js/common.js"></script>
	<script>
		setCookie('refersh_time', 0);
		function refersh_window() {
			var refersh_time = getCookie('refersh_time');
			if (refersh_time == 1) {
				window.location.reload();
			}
		}
		setInterval(function() {
			refersh_window()
		}, 2000);
		$(function() {
			//搜索标签保值
			<?php
				if (!empty($field_cols) && count($field_cols) > 2) {
			?>
				//隐藏所有th td
				$("#student_info th").each(function(){
					$(this).addClass('hide');
				});
				$("#student_info td").each(function(){
					$(this).addClass('hide');
				});
				$('#field_button button').each(function() {
					<?php
						foreach ($field_cols as $field_col) {
					?>
						if ($(this).html() == '{$field_col}'){
							$(this).addClass('btn-success');
							var btn_id = $(this).attr('id');
							var position = btn_id.indexOf('_') + 1;
							var index = btn_id.substring(position);
							
							//显示选中列
							$("#head_th_"+index).removeClass('hide');
							<?php
								foreach ($list as $user) {
							?>
								$("#td_"+index+"_{$user.id}").removeClass('hide');
							<?php
								}
							?>
						}
					<?php	
						}
					?>
				});
			<?php
				}
			?>
			
			Wind.use('ajaxForm', 'artDialog', 'iframeTools', function() {
				//选择课程
				<?php
					foreach($list as $student) {
				?>
					$('#student_{$student.id}').click(function(e) {
						var student_id = {$student.id};
						
						art.dialog.open("__ROOT__/index.php?g=admin&m=student&a=select_course&id="+ student_id , {
							title : "选择课程",
							width : "300px"
						});
					});
				<?php	
					}
				?> 
			});
		});
		
		<?php
			//修改5个冗余字头名称
			foreach ($rd_fields as $rd_field) {
		?>
				//使用jquery绑定td的双击dblclick
				$('#head_rd_field_{$rd_field.id}').dblclick(function(){
					$('#head_rd_field_{$rd_field.id} span').addClass('hide');
					$('#head_rd_field_{$rd_field.id} div').removeClass('hide');
				});
				//点击提交/取消
				$('#head_submit_{$rd_field.id}').click(function(){
					//字段的名字
					var param_key = "field_key";
					//字段的值
					var param_value = $('#head_input_{$rd_field.id}').val();
					$.post('{:U("student/field_async_edit")}', {param_key: param_key,param_value: param_value,field_id:{$rd_field.id}}, function(data){
						//alert(data);
						var str = data.substring(1);
						$('#head_rd_field_{$rd_field.id} span').html(str);
						$('#head_rd_field_{$rd_field.id} span').removeClass('hide');
						$('#head_rd_field_{$rd_field.id} div').addClass('hide');
					});
				});
				$('#head_cancel_{$rd_field.id}').click(function(){
					$('#head_rd_field_{$rd_field.id} div').addClass('hide');
					$('#head_rd_field_{$rd_field.id} span').removeClass('hide');
				});
				
		<?php
			}
		?>
		<?php
			foreach ($list as $user) {
				//总共87个字段
				for($index = 1; $index <= 87 ; $index ++) {
		?>
				//使用jquery绑定td的双击dblclick
				$('#td_{$index}_{$user.id}').dblclick(function(){
					$('#td_{$index}_{$user.id} span').addClass('hide');
					$('#td_{$index}_{$user.id} div').removeClass('hide');
				});
				//点击提交/取消
				$('#submit_{$index}_{$user.id}').click(function(){
					//字段的名字
					var param_key = $('#input_{$index}_{$user.id}').attr('name');
					//字段的值
					var param_value = $('#input_{$index}_{$user.id}').val();
					if (param_key == 'first_name' || param_key == 'last_name') {
						if (param_value == '') {
							alert('Name cannot be empty');
						} else {
							$.post('{:U("student/async_edit")}', {param_key: param_key,param_value: param_value,user_id:{$user.id}}, function(data){
								//alert(data);
								var str = data.substring(1);
								$('#td_{$index}_{$user.id} span').html(str);
								$('#td_{$index}_{$user.id} span').removeClass('hide');
								$('#td_{$index}_{$user.id} div').addClass('hide');
							});
						}
					} else {
						$.post('{:U("student/async_edit")}', {param_key: param_key,param_value: param_value,user_id:{$user.id}}, function(data){
							//alert(data);
							var str = data.substring(1);
							$('#td_{$index}_{$user.id} span').html(str);
							$('#td_{$index}_{$user.id} span').removeClass('hide');
							$('#td_{$index}_{$user.id} div').addClass('hide');
						});
					}
					
				});
				$('#cancel_{$index}_{$user.id}').click(function(){
					$('#td_{$index}_{$user.id} div').addClass('hide');
					$('#td_{$index}_{$user.id} span').removeClass('hide');
				});
		<?php
				}
			}
		?>
		
		
		
		<?php
			for($i=1; $i<30; $i++) {
		?>
			//标签按钮显示列
			$("#button_{$i}").click(function(){
				//按钮变色
				$(this).toggleClass('btn-success');
				//点击按钮隐藏所有th td
				$("#student_info th").each(function(){
					$(this).addClass('hide');
				});
				$("#student_info td").each(function(){
					$(this).addClass('hide');
				});
				//还有多少按钮被选中
				var index = 0;
				<?php
					for($j=1; $j<30; $j++) {
				?>
					if( $("#button_{$j}").attr("class") == "btn btn-xs btn-success" ) {
						index ++;
						//显示选中列
						$("#head_th_{$j}").removeClass('hide');
						<?php
							foreach ($list as $user) {
						?>
							$("#td_{$j}_{$user.id}").removeClass('hide');
						<?php
							}
						?>
					} 
				<?php
					}
				?>
				
				//如果index=0，则恢复显示所有字段
				if(index == 0) {
					$("#student_info th").each(function(){
						$(this).removeClass('hide');
					});
					$("#student_info td").each(function(){
						$(this).removeClass('hide');
					});
				}
			});
		<?php
			}
		?>
		//导出excel
		function export_students() {
			var cols_str = "First Name,Last Name";
			$('#field_button button.btn-success').each(function() {
				cols_str += ","+$(this).html();
			});
			$('#cols_str').val(cols_str);
			//alert(cols_str);
			$('#cmd').val('export');
			if (confirm('确定导出所筛选学生数据？')) {
				$("#cid-form").submit();
			} 
		}
		//导出excel
		function export_course() {
			$('#cmd').val('export_course');
			if (confirm('确定导出所筛选学生课程信息？')) {
				$("#cid-form").submit();
			} 
		}
		//搜索students
		function search_students() {
			var cols_str = "First Name,Last Name";
			$('#field_button button.btn-success').each(function() {
				cols_str += ","+$(this).html();
			});
			$('#cols_str').val(cols_str);
			//alert(cols_str);
			$('#cmd').val('');
			$("#cid-form").submit();
		}
		
	</script>
</body>
</html>